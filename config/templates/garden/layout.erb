<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= (metadata.is_a?(Hash) && metadata['title']) || File.basename(source_file, '.*').tr('_-', ' ').split.map(&:capitalize).join(' ') %></title>
    <%= stylesheet_tag %>
  </head>
  <body>
    <div class="garden-container">
      <% if config.navigation && files && files.any? %>
        <nav class="garden-nav">
          <div class="garden-nav-header">
            <h3>Garden</h3>
          </div>
          <div class="garden-nav-content">
            <ul class="garden-toc">
              <% files.each do |file| %>
                <% if file[:is_directory] %>
                  <li class="depth-<%= file[:depth] || 0 %> directory">
                    <span class="directory-name"><%= file[:title] %></span>
                  </li>
                <% else %>
                  <li class="depth-<%= file[:depth] || 0 %>">
                    <a href="<%= file[:html_path] %>" 
                       class="<%= file[:source_path] == source_file ? 'current' : '' %>">
                      <%= file[:title] %>
                    </a>
                  </li>
                <% end %>
              <% end %>
            </ul>
          </div>
        </nav>
      <% end %>
      <main class="garden-main">
        <div class="garden-content">
          <%= content %>
        </div>
      </main>
    </div>
  </body>
</html>